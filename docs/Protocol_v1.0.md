# پروتکل آزمون و ثبت‌داده — نسخهٔ 1.0
(تاریخ تولید: 2025-08-09 17:37)

## هدف
اندازه‌گیری رفتار چشمی و زمان‌واکنش در پاسخ به سؤالات چندگزینه‌ای ریاضی در محیط e-learning و
مدلسازی «نشانه‌های تلاشِ شناختی» و «رفتار تصادفی/غیرتصادفی» در شرایط مختلف (با/بی‌زمان و با/بی‌پاسخ صحیح).

## طراحی آزمایش
- ۱۵ سؤال چهارگزینه‌ای سطح متوسط بدون نیاز به ماشین‌حساب/نوشتن.
- **بخش ۱ (Part 1):** ۵ سؤال (۳ بلند + ۲ کوتاه)، بدون محدودیت زمانی، همگی دارای پاسخ صحیح.
- **بخش ۲ (Part 2):** ۱۰ سؤال (۶ بلند + ۴ کوتاه)، محدودیت **۹۰ ثانیه** برای هر سؤال.
  - دقیقاً ۵ سؤال با پاسخ صحیح در بین گزینه‌ها.
  - دقیقاً ۵ سؤال **بدون پاسخ صحیح** (گزینهٔ صحیح با گزینهٔ شبه‌صحیح جابه‌جا شده).
- ترتیب نمایش سؤال‌ها و گزینه‌ها برای هر شرکت‌کننده **تصادفی** و در `question_exams/Participant_X.json` ذخیره شده است.
- قبل از شروع Part 2 یک صفحهٔ انتقال با توضیح محدودیت زمانی نمایش داده می‌شود.

## رابط کاربر (UI)
- پنل چپ (≈۸۰٪ عرض): بالای صفحه «متن سؤال»، پایین صفحه «چهار گزینه» (چینش ۲×۲).
- پنل راست (≈۲۰٪ عرض): بالای آن تایمر (فقط در Part 2)، پایین آن دکمهٔ Submit (همواره).
- نسبت‌ها، رنگ‌ها و اندازهٔ فونت‌ها در `config.ini` مشخص است.
- مختصات نگاهِ دستگاه به صورت نرمال‌شده در بازهٔ ۰..۱ نسبت به پنجرهٔ آزمون ثبت می‌شود.

## ثبت‌داده‌ها
برای هر شرکت‌کننده `outputs/Participant_X/` شامل:
- `answers.json` — آرایه‌ای از ۱۵ رکورد: `section`، `question_number`، `question_id`، `chosen_option` (رشته مثل `9-3` یا `13-1-C` یا `null`)، `time_spent` (ثانیه).
- `Q1.csv` … `Q15.csv` — لاگ خام آی‌ترکر برای هر سؤال (یک فایل به‌ازای هر سؤال).

## قواعد «درستی پاسخ»
- اگر در `question_exams/...` برای آن سؤال `has_correct_answer = true` باشد، پاسخ درست **تنها** گزینه‌ای است که شناسه‌اش به `-C` ختم می‌شود.
- اگر `has_correct_answer = false` باشد، **هیچ پاسخ درستی وجود ندارد** (حتی اگر در بانک سؤال، گزینهٔ -C تعریف شده باشد).
- در تایم‌اوت: `chosen_option = null` و `time_spent = 90`.

## کالیبراسیون و اجرای آزمون
- برای هر شرکت‌کننده، کالیبراسیون دستگاه پیش از شروع اجرا می‌شود.
- توضیحات شفاهی و مکتوب ارائه و امضا می‌شود؛ وضعیت نشستن ثابت و بدون حرکت‌های غیرضروری.

## اعتبار داده و حذف‌ها (برای تحلیل)
- اعتبار ردیف‌های نگاه با `FPOGV`/`LPOGV`/`RPOGV` (۱ = معتبر). ردیف‌های نامعتبر برای تحلیل کنار گذاشته می‌شوند.
- آوتلایر زمانی: برای **هر سؤال** و **به‌صورت جداگانه** کوارتیل‌ها محاسبه می‌شود.
  - **خیلی سریع (Lower Outlier)** → «نامعتبر» و کل رکورد آن سؤال برای آن شرکت‌کننده حذف می‌شود.
  - **خیلی کند (Upper Outlier)** → خودبه‌خود «تلاشِ شناختی» تلقی می‌شود (صرف‌نظر از درست/غلط بودن).

## تفکیک فازها (برای تحلیل‌های بعدی)
- **فاز ۱ (خواندن سؤال):** از شروع نمایش تا اولین زمان که نگاه برای **حداقل N نمونهٔ پیاپی** وارد ناحیهٔ پاسخ‌ها می‌شود. مقدار پیشنهادی اولیه: `N = 10` (≈۰٫۱ ثانیه با فرکانس ۱۰۰–۱۵۰Hz).
- **فاز ۲ (ارزیابی گزینه‌ها):** از آن لحظه تا انتهای سؤال (حتی اگر نگاه گاهی به سؤال برگردد).

## نواحی موردعلاقه (AOI)
- AOIها روی کل پنجره به‌صورت نرمال‌شده (۰..۱) تعریف می‌شوند:
  - `question` (بالای پنل چپ)
  - `answer_tl`, `answer_tr`, `answer_bl`, `answer_br` (چهار ربع پایین پنل چپ؛ متناظر با ۴ گزینه)
  - `right_timer` (بالای پنل راست)، `right_submit` (پایین پنل راست)
- یک «ستون شناسهٔ ناحیه» برای هر ردیف نگاه ساخته خواهد شد (۰ = خارج از AOIها، ۱..۶ مطابق نقشه).

## ویژگی‌های پیشنهادی برای مدل
- تفاضل (Δ) بین ردیف‌های متوالی برای: `FPOGX, FPOGY, BPOGX, BPOGY, LPD, RPD` (حساس به حرکت، مستقل از مکان مطلق).
- پرچم پلک‌زدن (۰/۱) با استفاده از `BKID`/`BKDUR`.  
- در فاز پاسخ‌ها: یک ویژگی باینری «در AOIِ پاسخِ درست هست/نیست».

## برچسب‌ها (Labels) — نسخهٔ اولیه
- **Effort (0/1):** بعد از حذفِ خیلی‌سریع‌ها، اگر زمان در آوتلایر بالایی باشد → ۱؛ اگر در بازهٔ میانی باشد: وابسته به درست/غلط بودن؛ غلط = ۱، درست = ۰.
- **Random (0/1):** برای سؤالات بدون پاسخِ صحیح، به‌طور پیش‌فرض ۱ (به‌جز خیلی‌سریع‌ها که حذف می‌شوند). برای بقیه فعلاً نامعلوم/۰؛ در فاز بعدی قواعد دقیق‌تر اعمال می‌شود.

## نسخه‌گذاری
این پروتکل در طول کار تکمیل خواهد شد؛ هر تغییر با افزایش نسخه ثبت می‌گردد.